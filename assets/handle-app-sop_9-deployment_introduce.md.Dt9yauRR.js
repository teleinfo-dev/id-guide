import{_ as s,c as n,o as a,a7 as e}from"./chunks/framework.B9V0W_Mh.js";const m=JSON.parse('{"title":"企业节点快速部署","description":"","frontmatter":{},"headers":[],"relativePath":"handle-app-sop/9-deployment/introduce.md","filePath":"handle-app-sop/9-deployment/introduce.md","lastUpdated":1723458398000}'),l={name:"handle-app-sop/9-deployment/introduce.md"},i=e(`<h1 id="企业节点快速部署" tabindex="-1">企业节点快速部署 <a class="header-anchor" href="#企业节点快速部署" aria-label="Permalink to &quot;企业节点快速部署&quot;">​</a></h1><h2 id="前置准备" tabindex="-1">前置准备 <a class="header-anchor" href="#前置准备" aria-label="Permalink to &quot;前置准备&quot;">​</a></h2><ol><li><p>提前申请企业前缀</p></li><li><p>推荐企业接入的二级节点升级至1.3.19.3以上版本</p></li><li><p>联系泰尔英福运营人员，提供前缀（例如：88.888.888），开通服务寻址</p></li><li><p>通过企数通申请license</p></li><li><p>按照<a href="#环境准备">企业节点环境准备表</a>准备硬件资源和网络资源</p></li><li><p>准备以下信息</p><ul><li>企业前缀</li><li>服务器内网IP</li><li>二级节点S3服务地址（IP:Port）</li><li>二级节点S3服务AK/SK</li><li>二级节点服务AK/SK（在二级节点SNMS服务配置文件中）</li></ul></li></ol><h2 id="环境准备" tabindex="-1">环境准备 <a class="header-anchor" href="#环境准备" aria-label="Permalink to &quot;环境准备&quot;">​</a></h2><p><strong>服务器资源表</strong></p><table><tr><th colspan="2">部署服务器</th></tr><tr><td>操作系统</td><td>推荐openEuler 22.03 LTS或Anolis OS 8.8 GA</td></tr><tr><td>处理器</td><td>8核</td></tr><tr><td>内存</td><td>16 GB RAM</td></tr><tr><td>储存空间</td><td>500G</td></tr><tr><td>公网带宽</td><td>≥10M（idhub用于解析）</td></tr><tr><td>用途</td><td>idhub-manage,idhub-core,idhub-log服务及中间件部署</td></tr></table><p><strong>网络资源表</strong></p><table tabindex="0"><thead><tr><th>步骤</th><th>部署应用服务</th><th>部署服务</th><th>内网地址端口</th><th>公网端口</th><th>注意事项</th></tr></thead><tbody><tr><td>网络环境准备_规划IP</td><td>企业节点管理服务</td><td><ul style="width:120px;"><li>docker</li><li>idhub-manage</li> <li>idhub-core</li> <li>idhub-log</li><li>MySQL</li> <li>redis</li> <li>Minio</li> <li>MongoDB</li></ul></td><td><ul style="width:180px;"><li>22端口（SSH）</li><li>3000（idhub-manage）</li> <li>2641（idhub-core）</li> <li>8081（idhub-core）</li> <li>3306（MySQL）</li> <li> 27017（MongoDB）</li> <li> 6379（Redis）</li> <li> 9000（Minio）</li></ul></td><td><ul style="width:90px;"><li>3100（idhub-manage-web）</li> <li>2641（idhub-core）</li></ul></td><td>企业节点需要对接二级节点SNMS服务、二级节点的S3服务（默认9000端口）以及递归节点</td></tr></tbody></table><h2 id="快速部署" tabindex="-1">快速部署 <a class="header-anchor" href="#快速部署" aria-label="Permalink to &quot;快速部署&quot;">​</a></h2><ol><li>在服务器指定目录下载部署包</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>wget https://teleinfo.pek3b.qingstor.com/Ent_deploy.zip</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>解压部署包</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 解压</span></span>
<span class="line"><span>unzip Ent_deploy.zip</span></span>
<span class="line"><span># 进入解压包目录</span></span>
<span class="line"><span>cd Ent_deploy</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li>阅读readme，按照指导步骤进行操作</li></ol><ul><li><p>注意事项</p><ul><li>确认操作系统上已经安装了docker,docker-compose，若没有，请提前安装</li><li>如果操作系统不能联网，请手动上传镜像，并解压</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>镜像列表</span></span>
<span class="line"><span>registry.teleinfo.cn:8443/idhub-manage/idhub-lhs:20240717151004-Standard_2.0.0</span></span>
<span class="line"><span>registry.teleinfo.cn:8443/idhub-manage/idhub-log-client:20240717110141-Standard_1.0.1</span></span>
<span class="line"><span>registry.teleinfo.cn:8443/idhub-manage/idhub-manage-web:v2.0.1</span></span>
<span class="line"><span>registry.teleinfo.cn:8443/idhub-manage/idhub-buss-manage-server:v2.0.1</span></span>
<span class="line"><span>registry.teleinfo.cn:8443/ops/minio:RELEASE.2024-04-06T05-26-02Z</span></span>
<span class="line"><span>registry.teleinfo.cn:8443/ops/mongo:4.0</span></span>
<span class="line"><span>registry.teleinfo.cn:8443/ops/mysql:8</span></span>
<span class="line"><span>registry.teleinfo.cn:8443/ops/redis:latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>项目初始化，启动应用</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 初始化流程：</span></span>
<span class="line"><span>(1).填充初始化信息(选做)，文件路径./conf/variables.yaml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>(2).初始化</span></span>
<span class="line"><span>chmod +x ./bin/*;chmod +x ./middleware/*.sh </span></span>
<span class="line"><span>x86架构：cd ./bin/; ./init-x86</span></span>
<span class="line"><span>arm64架构：cd ./bin/; ./init-arm64</span></span>
<span class="line"><span></span></span>
<span class="line"><span>(3)启动应用</span></span>
<span class="line"><span>./start.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>日常维护</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 日常维护：</span></span>
<span class="line"><span>(1).应用维护</span></span>
<span class="line"><span>启动：cd ./bin/;./start.sh</span></span>
<span class="line"><span>关停：cd ./bin/;./stop.sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span>(2).中间件维护</span></span>
<span class="line"><span>启动：cd ./middleware/;./start.sh</span></span>
<span class="line"><span>关停：cd ./middleware/;./stop.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul>`,15),p=[i];function t(r,d,c,o,b,u){return a(),n("div",null,p)}const g=s(l,[["render",t]]);export{m as __pageData,g as default};
